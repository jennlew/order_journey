var __evo = window.__evo = window.__evo || {};
__evo.partnerConfig = {"leap":1,"domains":{"live":["www.productsandservices.bt.com","www.products.bt.com"],"staging":["www.staging.bt.com"]},"id":"bt"};
!function(){function e(){var e=!0,t=!1;return l.core?e:(l.core=!0,window.top!==window.self?e:l.live&&/(\.primefuse\.(com|org)|\.dev|\.grail\.partners|\.15gifts\.com)$/.test(document.location.host)&&!/^(\/public\/sandbox\/|\/callcentre|\/retail)/.test(document.location.pathname)?e:l.suppress?e:t)}function t(){var e=new Date;return e.setMinutes(30*parseInt(e.getMinutes()/30,10)),e.setSeconds(0),e.setMilliseconds(0),e.getTime()}function n(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("msie")?parseInt(e.split("msie")[1],10):!1}function r(e,t){var n,r,o,i,a;if(t||!c)for(r=/\+/g,o=/([^&=]+)=?([^&]*)/g,i=function(e){var t=e.replace(r," ");try{t=decodeURIComponent(t)}catch(n){}return t},a=window.location.search.substring(1),c={};n=o.exec(a);)c[i(n[1])]=i(n[2]);return c[e]}function o(e,t,n){var r=l.cookieConfig,o=r.partnerPrefix&&l.partner?l.partner+e:e;if(arguments.length>1&&"[object Object]"!==String(t)){if(n=n||{},null!==t&&void 0!==t||(n.expires=-1),"number"==typeof n.expires){var i=n.expires,a=n.expires=new Date;a.setDate(a.getDate()+i)}return t=String(t),!n.domain&&r.domain&&(n.domain=r.domain),!n.domain&&document.location.host.indexOf(".")>-1&&/[^\d\.:]/.test(document.location.host)&&(n.domain="."+document.location.host.replace(/^w+\./,"")),void 0===n.path&&(n.path="/"),l.wizard&&l.wizard.trigger&&l.wizard.trigger("setCookie",e,t,n),document.cookie=[encodeURIComponent(o),"=",n.raw?t:encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=t||{};var s,c=new RegExp("(?:^|; )"+encodeURIComponent(o)+"=([^;]*)").exec(document.cookie);return c&&(s=n.raw?c[1]:decodeURIComponent(c[1])),s}function i(e,t,n){function r(){var t,n,i,a,s,c,p=[];if(l.errors&&l.errors.length>0){for(;l.errors.length>0;){if(a=[],s=l.errors.shift(),s.stack)for(i=s.stack.split(/\n+/),t=0;t<i.length;t++)n=i[t].replace(/^\s+|\s+$/,""),""!==n&&a.push(n);p.push({seconds:(s.time/1e3).toFixed(2),message:s.message,url:s.url,line:s.line,column:s.column,stack:a.length>0?a:null})}p.length>0&&(c=new XMLHttpRequest,c.open("POST",o+"/wizard/error.html?p="+e),c.send(JSON.stringify({location:document.location.href,version:l.config?l.config.v:null,errors:p})))}setTimeout(r,1e3)}if(!l.errorLoggingEnabled&&window.JSON&&window.JSON.stringify){l.errors||(l.errors=[]),n||(n=t);var o=/^https?:\/\//.test(t)?t:"https://"+t,i=window.onerror;window.onerror=function(e,t,r,o,a){var s=(e||"")+(t||"")+(r||"")+(o||"");t&&-1!==t.indexOf(n)&&!d[s]&&(e&&!/^(script error|error loading script)/i.test(e)&&l.errors.push({time:(new Date).getTime()-p,message:e,url:t,line:r,column:o,stack:null!==a&&"object"==typeof a?a.stack:null}),d[s]=!0),i&&i.apply(this,arguments)},r(),l.errorLoggingEnabled=!0}}function a(e){var o=n();if(!(o&&8>=o)){var a,s,c=1;"object"==typeof l.partnerConfig&&null!==l.partnerConfig&&(a=l.partnerConfig.domains,c=l.partnerConfig.leap,s=l.partnerConfig.overrideLeapDomain);var p;if(a?a.staging&&a.staging.indexOf(document.location.host)>-1?p="staging":a.live&&a.live.indexOf(document.location.host)>-1&&(p="live"):p="internal",p){var d,g=e.toLowerCase();"staging"===p?d=g+".staging.15gifts.com":"live"===p?d=g+".15gifts.com":"internal"===p&&(d=s||document.location.host),i(e,d);var m=r("__evo_debug")?"/debug":"",u=t(),f=l.channel||"web",v="/public/leap/"+(1===c?"public":f),h=l.siteProtocol+d+v+m+"/partner.js?_="+u,w=document.createElement("script");w.id="leap-core",w.type="text/javascript",w.async=!0,w.crossOrigin="anonymous",w.src=h;var x=document.getElementsByTagName("script")[0];if(x.parentNode.insertBefore(w,x),2!==c){var _=l.siteProtocol+d+v+m+"/partner.css?_="+u,b=document.createElement("link");b.type="text/css",b.rel="stylesheet",b.href=_,x.parentNode.insertBefore(b,x)}}}}function s(){var e={script:"evo-core",scriptOld:"widget-evo-core",scriptTest:"evo-core-test"},t=r("__evo_partner");t&&o("__evo_partner",t,{expires:30}),t||(t=o("__evo_partner")||l.partner);var n=document.getElementById(e.scriptTest)||document.getElementById(e.script)||document.getElementById(e.scriptOld);return n?(!t&&n&&(t=n.getAttribute("data-partner")),l.live&&("Virgin"!==t&&"VirginMobile"!==t||!/^(\/virgin\-media\-mobile|\/mobile)/.test(document.location.pathname)||(l.partnerConfig.id=t="VirginMobile")),t):null}var c,l=window.__evo=window.__evo||{},p=(new Date).getTime(),d={},g="yes";l.live="yes"===g,l.siteProtocol="https:"===window.location.protocol?"https://":"http://",l.cookieConfig={partnerPrefix:null,domain:null},l.partnerConfig=l.partnerConfig||{id:"partner",domains:{live:["live-domain.com"],staging:["staging-domain.com"]}};var m=s();m&&!e()&&a(m)}();
